<html>
<body>
<canvas id='lesson01' width='500' height='500'/>

<script>
    let canvas = document.getElementById("lesson01");
    let context = canvas.getContext("2d");

    var psize = 1;
    var shape_size = 20;
    var shape_pos = 1;
    <!--context.fillStyle = "#CC0099";-->
    <!--context.fillRect(10 * psize, 10 * psize, psize, psize);-->

    function draw() {
        context.fillStyle = "#CC0099";
        for (var i = 0; i < 10 * psize; i++) {
            context.fillRect(i * psize, i * psize,
                psize, psize);
        }

        context.fillStyle = "#FF00FF";
        for (var j = 0; j < shape_size; j++) {
            for (var i = 0; i < shape_size; i++) {
                context.fillRect((i + shape_size + shape_pos) * psize, (shape_pos + j + shape_pos) * psize,
                    psize, psize);
            }
        }
    }

    function erase_draw()
    {
        context.fillStyle = "#FFFFFF";
        for (var j = 0; j < shape_size; j++)
        {
            for (var i = j; i < shape_size; i++)
            {
                context.fillRect((shape_pos+i)*psize, (shape_pos+j)*psize,
                    psize, psize);
            }
        }

        context.fillStyle = "#FFFFFF";
        for (var j = 0; j < shape_size; j++)
        {
            for (var i = 0; i < shape_size-j; i++)
            {
                context.fillRect((i+shape_size+shape_pos)*psize, (shape_pos+j)*psize,
                    psize, psize);
            }
        }
    }

    function draw2() {
        context.fillStyle = "#CC0099";
        for (var i = psize; i > 0; i--) {
            context.fillRect(i * psize, i * psize,
                psize, psize);
        }

        context.fillStyle = "#FF00FF";
        for (var j = shape_size; j > 0; j--) {
            for (var i = shape_size; i > 0; i--) {
                context.fillRect((i - shape_size - shape_pos) * psize, (shape_pos - j - shape_pos) * psize,
                    psize, psize);
            }
        }
    }

    function erase_draw2()
    {
        context.fillStyle = "#843939";
        for (var j = shape_size; j > 0; j--)
        {
            for (var i = j; i > 0; i--)
            {
                context.fillRect((shape_pos-i)*psize, (shape_pos-j)*psize,
                    psize, psize);
            }
        }

        context.fillStyle = "#FFFFFF";
        for (var j = shape_size; j > 0; j--)
        {
            for (var i = shape_size+j; i > 0; i--)
            {
                context.fillRect((i - shape_size - shape_pos) * psize, (shape_pos - j) * psize,
                    psize, psize);
            }
        }
    }

    setInterval(function () {
        erase_draw2();

        shape_pos++;

        draw2();
    }, 10);

    setInterval(function () {
        erase_draw();

        shape_pos++;

        draw();
    }, 10);



    canvas.addEventListener('mousedown', function (e) {
        console.log("mousedown", e.clientX, " ", e.clientY);
    });

</script>
</body>
</html>

